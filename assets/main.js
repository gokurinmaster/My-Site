document.addEventListener('DOMContentLoaded',()=>{const y=document.getElementById('year');if(y) y.textContent=new Date().getFullYear();const btn=document.getElementById('helloBtn');const res=document.getElementById('result');btn?.addEventListener('click',()=>{res.textContent='GitHub Pages からこんにちは!';btn.disabled=true;setTimeout(()=>{btn.disabled=false;res.textContent='';},3000);});const themeToggle=document.getElementById('themeToggle');const root=document.documentElement;const STORAGE_KEY='site-theme';function applyTheme(value){document.body.classList.remove('light','dark');if(value==='dark') document.body.classList.add('dark');if(value==='light') document.body.classList.add('light');}const saved=localStorage.getItem(STORAGE_KEY);if(saved){applyTheme(saved);}themeToggle?.addEventListener('click',()=>{const current=document.body.classList.contains('dark')?'dark':document.body.classList.contains('light')?'light':'system';let next;if(current==='system') next='dark';else if(current==='dark') next='light';else next='system';if(next==='system'){localStorage.removeItem(STORAGE_KEY);applyTheme('');themeToggle.title='テーマ: システム';}else {localStorage.setItem(STORAGE_KEY,next);applyTheme(next);themeToggle.title='テーマ: '+next;}});
// --- Twitter Embed Lazy Load ---
const twitterContainer=document.getElementById('twitterEmbed');if(twitterContainer){const loadTwitter=()=>{if(twitterContainer.dataset.loaded) return;const s=document.createElement('script');s.async=true;s.src='https://platform.twitter.com/widgets.js';document.body.appendChild(s);twitterContainer.dataset.loaded='1';};if('IntersectionObserver'in window){const io=new IntersectionObserver(entries=>{entries.forEach(e=>{if(e.isIntersecting){loadTwitter();io.disconnect();}});});io.observe(twitterContainer);}else{setTimeout(loadTwitter,1500);} }
});